{% load static %}

<div class="tf-list-layout wrapper-shop fade-in-animation" id="listLayout" hx-swap-oob="true">
    {% for product in products %}
        <div class="card-product list-layout" data-availability="In stock" data-brand="Ecomus">
            <div class="card-product-wrapper">
                <a href="#" class="product-img">
                    <img class="lazyload img-product" data-src="{{ product.variants.first.get_images.first.image.url }}" src="{{ product.variants.first.get_images.first.image.url }}" alt="{{ product.name }}">
                    <img class="lazyload img-hover" data-src="{{ product.variants.first.get_images.last.image.url }}" src="{{ product.variants.first.get_images.last.image.url }}" alt="{{ product.name }}">
                </a>
            </div>
            <div class="card-product-info">
                <a href="#" class="title link">{{ product.name }}</a>
                <span class="price current-price">Rs. {{ product.variants.first.discount_price }}</span>
                <p class="description">{{ product.description }}</p>
                <ul class="list-color-product">
                    {% for image in product.images.all %}
                        {% if image.color %}
                            <li class="list-color-item color-swatch {% if forloop.first %}active{% endif %}">
                                <span class="tooltip">{{ image.color.value }}</span>
                                <span class="swatch-value bg_{% if image.color.value|lower == 'black' %}dark{% else %}{{ image.color.value|lower }}{% endif %}">
                                </span>
                                <img class="lazyload" data-src="{{ image.image.url }}" src="{{ image.image.url }}" alt="{{ product.name }} - {{ image.color.value }}" />
                            </li>
                        {% endif %}
                    {% endfor %}
                </ul>
                <div class="size-list">
                    {% for variant in product.variants.all %}
                        <span class="size-item">{{ variant.size }}</span>
                    {% endfor %}
                </div>
                <div class="list-product-btn">
                    <a href="#quick_add" data-bs-toggle="modal" class="box-icon quick-add style-3 hover-tooltip"><span class="icon icon-bag"></span><span class="tooltip">Quick add</span></a>
                    <a href="#" class="box-icon wishlist style-3 hover-tooltip"><span class="icon icon-heart"></span> <span class="tooltip">Add to Wishlist</span></a>
                    <a href="#compare" data-bs-toggle="offcanvas" class="box-icon compare style-3 hover-tooltip"><span class="icon icon-compare"></span> <span class="tooltip">Add to Compare</span></a>
                    <a href="#quick_view" data-bs-toggle="modal" class="box-icon quickview style-3 hover-tooltip"><span class="icon icon-view"></span><span class="tooltip">Quick view</span></a>
                </div>
            </div>
        </div>
    {% endfor %}
</div>